# ゲームオブジェクトの状態の構造

ゲームオブジェクト（*1）の状態（*2）は、少なくとも４種類に分かれそうです。  

* `*1` - Bakin では `イベント` と呼ぶ
* `*2` - ステート；State。Bakin では `イベントシート` と呼ぶ

プログラマーから見た状態：  

|                                      | 自ゲームオブジェクト内の他のステートと排他 | 自ゲームオブジェクト内の他のステートと同時進行可能 |
|--------------------------------------|:------------------------------------------:|:--------------------------------------------------:|
| 他のゲームオブジェクトと排他         |                      A                     |                           B                        |
| 他のゲームオブジェクトと同時進行可能 |                      C                     |                           D                        |
| ［他のゲームオブジェクトと同時進行可能］<br/>な処理を終えたあと、<br/>［他のゲームオブジェクトと排他］<br/>な処理を行う | E(2/2) | E(1/2)  |

📺 [動画](https://x.com/muzudho1/status/1862759766155788622)  

バキナーから見たイベントシート：  

|                                      |             イベント内の他のイベントシートと排他               | イベント内の他のイベントシートと同時進行可能 |
|--------------------------------------|:--------------------------------------------------------------:|:--------------------------------------------:|
| 他のイベントと排他                   |    （無印の）イベントシート<br>自動的に開始（１回だけ実行）    |                  ※見つからず                |
| 他のイベントと同時進行可能           |（無印の）イベントシート<br>自動的に開始（並列して１回だけ実行）| 並列動作するイベントシート<br/>生成時（並列して実行） |
| ［他のイベントと同時進行可能］<br/>な処理を全部終えたあと、<br/>［他のイベントと排他］<br/>な処理を全部行う | A と同じ | D と同じ |

👆　B に対応する操作が見つからず、それでいて、 D と E(1/2) 、そして A と E(2/2) は同じ実装です。  

こうしてみると、  
Bakin が言うＣ：「（無印の）イベントシート。自動的に開始（並列して１回だけ実行）」とは、［他のイベントとの同時進行を１回だけ実行。自イベントの他のイベントシートとは排他的］ぐらい書くべきであり、  
Ｄ：「並列動作するイベントシート。生成時（並列して実行）］は、［他のイベント、および自イベントの別のP:イベントシートとの同時進行を１回だけ実行］ぐらい書くべきかもしれません。  

# 一貫性の破れ

上図を見ると［ゲームオブジェクト間での排他性］と、［同ゲームオブジェクト内のステート間での排他性］の２軸に分かれ、上手く直交したと思えましたが、  
これを破るケースがあります。  

コマンドの［上に１マス歩く］などの、イベントを歩かせる処理です。  
このコマンド同士を２つ同時進行させようとすると、片方だけが優先して動いて、もう片方は微動だけして完全な動きをしません。  
