# ベスト・プラクティス＜第２回＞　書いたプログラムが変わってる

**アーリーアクセス版** なんかいわゆるテストとデバッグ中であって、それに対して、  
「そんなん、バグが全部取れるまで買い控えだ」という向きもあるかもしれない。  
まあとにかく、少し動くなら、動くところだけ使うとか、何か理由があって、そんなのものに早くから手を付ける人はいる。  

言ってしまえば Bakin には、  
恐らく Bakin の開発者はバグと思っていない［正しい挙動］が、わたしには［バグに見える挙動］というのがあって、  

なんかプログラミング間違ったかな、と真面目に考えていると  
単にエディターが［Bakin の開発者が考える正しい挙動］をしていて、わたしには［わたしが想定していたように動かない挙動］をしていることがある。  

例えば、わたしはプログラムを書き、そしてわたしの書いたプログラムが変わってるということがある。  

プログラミングをやっていて、あまりお目にかかることはないことだが、  
Bakin を触っていて「プログラミング、なんか間違ったかな？」と思ったら  
まず「わたしがこういう結果になると期待して行った操作は、わたしが期待するような結果をしない」と疑ってみるのもベストプラクティスだ。  

「プログラミングは書いた通りに動く」という格言があるが、  
Bakin においては、「操作しているうち、知らんうちに、書いたプログラムが変わってる」ということがある。  

見つけるたびに、１個１個その事象を書いていき、避けていくことにする。  


## [Case:1] 変数のリネーム後に［変数の分裂］

例えば［グローバル変数］（Bakinの言う「通常」の変数）の名前を［雑魚番号ｅｎｄ］と書いて使っていたとする。  
あとでその変数名を、［ゲームオブジェクトのステートのスクリプト］画面（Bakinの言う「コマンドスクリプト」）を開きながら、  
［最終雑魚番号］に変えて、その後も使ったとする。  

ここで、全ての［スクリプト］（Bakinの言う「コマンドスクリプト」）で使われていた［雑魚番号ｅｎｄ］という名前が［最終雑魚番号］に変わっていればいいが、  
どうも Bakinの言うコモンスクリプトのコマンドスクリプト上では、［雑魚番号ｅｎｄ］のまま残っているケースがあるらしい。  
これの再現性がわからない。  

このとき、［雑魚番号ｅｎｄ］は削除されたという判定なのか、変数名が一番下に出てくる。  
当然、もともと同じ変数で名前を変えた新旧の関係である［雑魚番号ｅｎｄ］と［最終雑魚番号］という２つの名前が、２つの変数として分かれてしまっては、プログラムは正しく動かない。  
これを仮に　**変数の分裂**　とでも呼ぶとしよう。  

どうも、［ゲームオブジェクトのステートのスクリプト］から［コモンイベント］にコードをコピー貼り付けすると  
ローカル変数は同じ名前の別物だから、  
どっちかで変数名の変更をしても　どっちかはそのまま残るので、  
それに気づかず作業をしていると、［変数の分裂］をするのかもしれない  
